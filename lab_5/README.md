# Lab_5: Автоматизація за допомогою Makefile VS Docker Compose

## Makefile
1. Створюю папку `my_app` в якій буде знаходитись проект. Створюю папку `tests` де будуть тести на перевірку працездатності проекту. 
2. Копіюю файли з репозиторію `devops_course` у відповідні папки свого. Ознайомлююсь із вмістом кожного з файлів.
3. Пробую чи проект є працездатним перейшовши у папку та після ініціалізації середовища виконую команди записані нижче:
        `pipenv --python 3.7`
        `pipenv install -r requirements.txt`
        `pipenv run python app.py`
4. Сервер запустився, проте видав помилки `redis.exceptions.ConnectionError` Виправив помилки встановивши `redis` та прописав для нього адресу у файл `hosts`, після цього все працює.
![alttext](s1.png)
![alttext](s2.png)
5. Перевiрив виконання тестiв, всi тести пройшли успiшно.
![alttext](s3.png)
6. Видаляю усі створені пiсля запуску файли.
7. Ознайомлююсь із вмістом `Dockerfile` та `Makefile` та його директивами. 
    * `STATES` та `REPO` це змінні, що містять назви тегів та назву репозиторія відповідно;
    * Директива `.PHONY` підставляє значення з змінної `STATES` та викликає директиву `$(STATES)`;
    * `$(STATES)` можна викликати просто підставляючи назву тегу і призначена для білду Docker Image;
    * `run` для запуску сайту та `redis`;
    * `test-app` для запуску тестів;
    * `docker-prune` для очищення ресурсів Docker;
8. Створюю, використовуючи команду `make` Docker імеджі для додатку та для тестів наступним чином:
    - Для додатку та тестів: `sudo make app` та `sudo make tests`.
    - Запускаю додаток `sudo make run ` та запускаю тести у новому вікні терміналу командою `sudo make test-app`.  Тести пройшли успішно, сайт також працює успішно:
    - ![alttext](s4.png)
    - ![alttext](s5.png)
    - в браузері:
    - ![alttext](s6.png)
    - ![alttext](s7.png)

